package kr.co.hana.loan.controller;

import java.io.IOException;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.multipart.MultipartHttpServletRequest;

import kr.co.hana.loan.Service.LoanService;

@Controller
public class LoanController {
	
	@Autowired
	private LoanService loanservice;
	
	
	@GetMapping("/loan")
	public String loanMain() {
		System.out.println("대출볼래?");
		return "loan/loan";
	}
	
	@GetMapping("/loan/review")
	public String loanReview(){
		System.out.println("대출심사파일업로드");
		
		return "loan/reviewfile";
	}
	
	@PostMapping("/fileres")
	public String loanReviewFileuploadResult(MultipartHttpServletRequest mhsq) throws IllegalStateException,IOException {
		/*?chkAll=on
		 * &chkEtc1=on
		 * &chkEtc2=on
		 * &contractpaper=210915-예시페이지.pptx
		 * &receipt=HANAPAY_DA2.zip
		 * &residentcerti=kopoOpenBankPj02.zip
		 * &familycerti=아이디어.txt
		
		*/
		Iterator<String> iter = mhsq.getFileNames();
		String contractpaper = req.getParameter("contractpaper");
		String receipt = req.getParameter("receipt");
		String residentcerti = req.getParameter("residentcerti");
		String familycerti = req.getParameter("familycerti");
		
		System.out.println(contractpaper);
		System.out.println(receipt);
		System.out.println(residentcerti);
		System.out.println(familycerti);
	
		System.out.println("대출심사파일업로드완");
		return "loan/fileresult";
	}
}
